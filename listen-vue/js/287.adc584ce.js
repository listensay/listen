"use strict";(self["webpackChunklisten_vue_dev"]=self["webpackChunklisten_vue_dev"]||[]).push([[287],{2045:function(e,l,i){i.r(l),i.d(l,{default:function(){return le}});var s=i(1404),r=i(3396),t=i(4870),n=i(610),o=i(5323),a=i(7936),c=i(253),d=i(2220);function u(e){const l=(0,r.FN)();l&&(0,d.l7)(l.proxy,e)}const v=Symbol(),f=()=>(0,r.f3)(v,null);var g=i(6048);const[p,m]=(0,n["do"])("loading"),b=Array(12).fill(null).map(((e,l)=>(0,r.Wm)("i",{class:m("line",String(l+1))},null))),h=(0,r.Wm)("svg",{class:m("circular"),viewBox:"25 25 50 50"},[(0,r.Wm)("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),w={size:o.Or,type:(0,o.SQ)("circular"),color:String,vertical:Boolean,textSize:o.Or,textColor:String};var _=(0,r.aZ)({name:p,props:w,setup(e,{slots:l}){const i=(0,r.Fl)((()=>(0,d.l7)({color:e.color},(0,g.Xn)(e.size)))),s=()=>{const s="spinner"===e.type?b:h;return(0,r.Wm)("span",{class:m("spinner",e.type),style:i.value},[l.icon?l.icon():s])},t=()=>{var i;if(l.default)return(0,r.Wm)("span",{class:m("text"),style:{fontSize:(0,g.Nn)(e.textSize),color:null!=(i=e.textColor)?i:e.color}},[l.default()])};return()=>{const{type:l,vertical:i}=e;return(0,r.Wm)("div",{class:m([l,{vertical:i}]),"aria-live":"polite","aria-busy":!0},[s(),t()])}}});const x=(0,s.n)(_);const[y,k,H]=(0,n["do"])("list"),S={error:Boolean,offset:(0,o.SI)(300),loading:Boolean,disabled:Boolean,finished:Boolean,scroller:Object,errorText:String,direction:(0,o.SQ)("down"),loadingText:String,finishedText:String,immediateCheck:o.J5};var L=(0,r.aZ)({name:y,props:S,emits:["load","update:error","update:loading"],setup(e,{emit:l,slots:i}){const s=(0,t.iH)(e.loading),n=(0,t.iH)(),o=(0,t.iH)(),d=f(),v=(0,c.eo)(n),g=(0,r.Fl)((()=>e.scroller||v.value)),p=()=>{(0,r.Y3)((()=>{if(s.value||e.finished||e.disabled||e.error||!1===(null==d?void 0:d.value))return;const{direction:i}=e,r=+e.offset,t=(0,c.EL)(g);if(!t.height||(0,a.xj)(n))return;let u=!1;const v=(0,c.EL)(o);u="up"===i?t.top-v.top<=r:v.bottom-t.bottom<=r,u&&(s.value=!0,l("update:loading",!0),l("load"))}))},m=()=>{if(e.finished){const l=i.finished?i.finished():e.finishedText;if(l)return(0,r.Wm)("div",{class:k("finished-text")},[l])}},b=()=>{l("update:error",!1),p()},h=()=>{if(e.error){const l=i.error?i.error():e.errorText;if(l)return(0,r.Wm)("div",{role:"button",class:k("error-text"),tabindex:0,onClick:b},[l])}},w=()=>{if(s.value&&!e.finished&&!e.disabled)return(0,r.Wm)("div",{class:k("loading")},[i.loading?i.loading():(0,r.Wm)(x,{class:k("loading-icon")},{default:()=>[e.loadingText||H("loading")]})])};return(0,r.YP)((()=>[e.loading,e.finished,e.error]),p),d&&(0,r.YP)(d,(e=>{e&&p()})),(0,r.ic)((()=>{s.value=e.loading})),(0,r.bv)((()=>{e.immediateCheck&&p()})),u({check:p}),(0,c.OR)("scroll",p,{target:g,passive:!0}),()=>{var l;const t=null==(l=i.default)?void 0:l.call(i),a=(0,r.Wm)("div",{ref:o,class:k("placeholder")},null);return(0,r.Wm)("div",{ref:n,role:"feed",class:k(),"aria-busy":s.value},["down"===e.direction?t:a,w(),m(),h(),"up"===e.direction?t:a])}}});const T=(0,s.n)(L);i(1958);var W=i(7139);const D=(0,r._)("button",{class:"link"},"展开",-1),C=[D];var M={__name:"TextOverflow",setup(e){const l=(0,t.iH)(!1),i=()=>{l.value=!1},s=()=>{l.value=!0};return(e,t)=>((0,r.wg)(),(0,r.iD)("div",{class:(0,W.C_)({"overflow-hidden mb-14":!l.value})},[(0,r.WI)(e.$slots,"default"),l.value?((0,r.wg)(),(0,r.iD)("button",{key:0,class:"block link my-4",onClick:i}," 收起 ")):((0,r.wg)(),(0,r.iD)("span",{key:1,class:"show-more-btn",onClick:s},C))],2))}};const z=M;var B=z,Y=(i(560),i(2578)),j=i(3348);const O={class:"home bg-white p-8 py-6 pb-16"},A={class:"flex"},R={class:"w-12 mr-4 flex-shrink-0"},F=["src","alt"],I={class:"flex-1 pb-4 border-b-[1px] border-zinc-150 truncate"},Z={class:"text-[#5b6b92] mb-1"},E={class:"relative"},G=["innerHTML"],J=["innerHTML"],K={class:"pic my-4 grid grid-cols-3 gap-2"},N=["src"],P={key:1,class:"relative"},Q={class:"prose lg:prose-sm"},U=["innerHTML"],q={key:1,class:"prose xs:prose-xs"},X=["innerHTML"];var $={__name:"index",setup(e){const l=(0,j.o)(),{homeArticleList:i,pages:s}=(0,Y.Jk)(l),n=(0,t.iH)(0),o=(0,t.iH)(!1),a=(0,t.iH)(!1),c=async()=>{a.value||await l.fetchGetArticleList(++n.value),o.value=!1,n.value===s.value&&(a.value=!0)},d=e=>{let l=[],i=e.matchAll(/<img[^>]+src="([^">]+)"/g);for(let s of i)l.push(s[1]);return l},u=e=>{let l=e.replace(/<img[^>]*>/g,"");return l=l.replace(/<br\s*\/?>/g,""),l.replace(/<p>\s*<\/p>/g,"")};return(0,r.bv)((()=>{console.log(document.querySelector(".contRef"))})),(e,l)=>{const s=B,n=T;return(0,r.wg)(),(0,r.iD)("div",O,[(0,r.Wm)(n,{loading:o.value,"onUpdate:loading":l[0]||(l[0]=e=>o.value=e),finished:a.value,"finished-text":"没有更多了",offset:"0",onLoad:c},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)((0,t.SU)(i),(e=>((0,r.wg)(),(0,r.iD)("div",{key:e.cid,class:"mb-8"},[(0,r._)("div",A,[(0,r._)("div",R,[(0,r._)("img",{class:"w-12 rounded",src:e.categories[0].description,alt:e.categories[0].name},null,8,F)]),(0,r._)("div",I,[(0,r._)("div",Z,(0,W.zw)(e.categories[0].name),1),"imgGrid"===e.fields.articleStyle.value?((0,r.wg)(),(0,r.iD)(r.HY,{key:0},[(0,r._)("div",E,["1"===e.fields.hiddenLine.value?((0,r.wg)(),(0,r.j4)(s,{key:0,class:"content",ref_for:!0,ref:"contRef"},{default:(0,r.w5)((()=>[(0,r._)("div",{innerHTML:u(e.digest),class:"prose lg:prose-sm"},null,8,G)])),_:2},1536)):((0,r.wg)(),(0,r.iD)("div",{key:1,innerHTML:u(e.digest),class:"prose lg:prose-sm"},null,8,J))]),(0,r._)("div",K,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(d(e.digest),(e=>((0,r.wg)(),(0,r.iD)("div",{key:e,class:"relative w-full pt-[100%]"},[(0,r._)("img",{src:e,class:"top-0 absolute h-full object-cover"},null,8,N)])))),128))])],64)):((0,r.wg)(),(0,r.iD)("div",P,["1"===e.fields.hiddenLine.value?((0,r.wg)(),(0,r.j4)(s,{key:0,class:"content",ref_for:!0,ref:"contRef"},{default:(0,r.w5)((()=>[(0,r._)("div",Q,[(0,r._)("div",{innerHTML:e.digest},null,8,U)])])),_:2},1536)):((0,r.wg)(),(0,r.iD)("div",q,[(0,r._)("div",{innerHTML:e.digest,class:"first:p:mt-0"},null,8,X)]))]))])])])))),128))])),_:1},8,["loading","finished"])])}}},V=i(89);const ee=(0,V.Z)($,[["__scopeId","data-v-8d3b7d8a"]]);var le=ee}}]);
//# sourceMappingURL=287.adc584ce.js.map